<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start Your Journey | Samarpan</title>
    
    <!-- SEO -->
    <meta name="description" content="Begin your holistic wellness journey with Harsh Ranjan. Intake form for Ayurveda, Psychology, and Yoga sessions.">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HMM7CJSCW7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HMM7CJSCW7');
    </script>
    
    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22 fill=%22none%22 stroke=%22%23D95D39%22 stroke-width=%222%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22/><path d=%22M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z%22/></svg>">

    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Lato:wght@300;400;700&family=Marcellus&display=swap" rel="stylesheet">

    <!-- CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        clay: '#D95D39',
                        'brand-black': '#1C1C1C',
                        'brand-gray': '#666666',
                        'brand-gold': '#C5A059',
                        'brand-cream': '#FDFBF7',
                        paper: '#FDFBF7',
                        sage: '#4A5D4F'
                    },
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        serif: ['Cormorant Garamond', 'serif'],
                        display: ['Marcellus', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #FDFBF7; color: #1C1C1C; -webkit-font-smoothing: antialiased; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #FDFBF7; }
        ::-webkit-scrollbar-thumb { background: #D95D39; }
        
        .fade-in-up { opacity: 0; transform: translateY(20px); }
    </style>
</head>
<body class="selection:bg-clay selection:text-white min-h-screen flex flex-col justify-between">

    <!-- NAVIGATION (Minimal) -->
    <nav class="absolute top-0 w-full p-6 z-50">
        <div class="max-w-[1400px] mx-auto flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3 group">
                <!-- Logo: Saffron Color -->
                <svg width="32" height="32" viewBox="0 0 100 100" fill="none" class="text-clay drop-shadow-sm">
                    <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 15C50 15 70 40 70 55C70 66.0457 61.0457 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="85" r="3" fill="currentColor"/>
                    <path d="M20 50H80" stroke="currentColor" stroke-width="1.5" stroke-opacity="0.8"/>
                </svg>
                <span class="font-sans text-[10px] uppercase tracking-[0.2em] font-bold text-brand-black group-hover:text-clay transition duration-500">Back to Home</span>
            </a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-grow flex items-center justify-center py-24 px-6 relative">
        <!-- Background Elements -->
        <div class="fixed top-0 left-0 w-full h-1/2 bg-gradient-to-b from-brand-gold/5 to-transparent -z-10"></div>
        <div class="fixed bottom-0 right-0 w-96 h-96 bg-sage/5 rounded-full blur-3xl -z-10"></div>

        <div class="max-w-2xl w-full bg-white p-8 md:p-12 rounded-xl shadow-2xl border-t-4 border-clay fade-in-up">
            
            <div class="text-center mb-10">
                <span class="font-sans text-[10px] uppercase tracking-widest text-clay block mb-2">Intake Form</span>
                <h1 class="font-display text-4xl text-brand-black mb-4">Begin Your Transformation</h1>
                <p class="font-serif text-brand-gray text-lg italic">
                    "The journey of a thousand miles begins with a single step of intention."
                </p>
            </div>

            <!-- Form Connected to Firebase -->
            <form id="detailedForm" onsubmit="handleSessionRequest(event)" class="space-y-6">
                
                <!-- Personal Details -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-1">
                        <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Full Name</label>
                        <input type="text" name="name" id="name" required class="w-full bg-[#FAFAF8] border-b border-gray-200 p-3 text-sm focus:outline-none focus:border-clay transition placeholder-gray-300" placeholder="e.g. Aditi Sharma">
                    </div>
                    <div class="space-y-1">
                        <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Email Address</label>
                        <input type="email" name="email" id="email" required class="w-full bg-[#FAFAF8] border-b border-gray-200 p-3 text-sm focus:outline-none focus:border-clay transition placeholder-gray-300" placeholder="e.g. aditi@example.com">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-1">
                        <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Mobile Number</label>
                        <input type="tel" name="phone" id="phone" required class="w-full bg-[#FAFAF8] border-b border-gray-200 p-3 text-sm focus:outline-none focus:border-clay transition placeholder-gray-300" placeholder="+91 98765 43210">
                    </div>
                    <div class="space-y-1">
                        <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Location</label>
                        <input type="text" name="location" id="location" class="w-full bg-[#FAFAF8] border-b border-gray-200 p-3 text-sm focus:outline-none focus:border-clay transition placeholder-gray-300" placeholder="City, Country (for Timezone)">
                    </div>
                </div>

                <!-- Service Selection -->
                <div class="space-y-1 pt-2">
                    <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Interested In</label>
                    <div class="relative">
                        <select name="service" id="service" required class="w-full bg-[#FAFAF8] border-b border-gray-200 p-3 text-sm focus:outline-none focus:border-clay transition text-brand-black appearance-none cursor-pointer">
                            <option value="" disabled selected>Select a Session Type...</option>
                            <option value="Ayurveda Consultation">Ayurveda Consultation (Biology & Diet)</option>
                            <option value="Psychology Session">Therapeutic Psychology Session</option>
                            <option value="Yoga Session">Yoga Session (Hatha/Nidra)</option>
                            <option value="Mantra Chanting">Mantra Chanting Session</option>
                            <option value="Ajapa Japa">Ajapa Japa Session</option>
                            <option value="Meditation">Meditation Guidance</option>
                            <option value="Holistic Package">Holistic Package (Combined)</option>
                            <option value="Other">Other Inquiry</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-3 top-3 w-4 h-4 text-brand-gray pointer-events-none"></i>
                    </div>
                </div>

                <!-- Detailed Input -->
                <div class="space-y-1 pt-2">
                    <label class="text-[10px] uppercase tracking-widest text-brand-gray font-bold">Current Challenges / Intention</label>
                    <textarea name="message" id="message" required rows="4" class="w-full bg-[#FAFAF8] border border-gray-200 p-4 text-sm rounded-sm focus:outline-none focus:border-clay transition resize-none placeholder-gray-300" placeholder="Please briefly describe your health concerns, mental state, or spiritual goals..."></textarea>
                </div>

                <!-- Submit -->
                <div class="pt-4">
                    <button type="submit" class="w-full py-4 bg-brand-black text-white font-sans text-xs font-bold uppercase tracking-[0.25em] hover:bg-clay hover:shadow-lg transition duration-500 rounded-sm">
                        Submit Request
                    </button>
                </div>

                <div id="formStatus" class="text-center min-h-[20px]"></div>
                
                <p class="text-[10px] text-center text-brand-gray/50 mt-4">
                    Your information is held in strict confidence. <br>We typically respond within 24 hours.
                </p>
            </form>
        </div>
    </main>

    <!-- FOOTER (Simple) -->
    <footer class="py-8 text-center text-brand-gray/40 text-[10px] uppercase tracking-widest border-t border-brand-gray/10">
        &copy; 2026 Samarpan â€¢ Global
    </footer>

    <!-- FIREBASE MODULE -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        // Additional imports required for the form logic to work
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDSK1aO2VlYeUAdf5IZ8dA9Y69wM7pkrHQ",
            authDomain: "thesamrpan.firebaseapp.com",
            projectId: "thesamrpan",
            storageBucket: "thesamrpan.firebasestorage.app",
            messagingSenderId: "510287005957",
            appId: "1:510287005957:web:978533c6dbca0f4969cf6c",
            measurementId: "G-ML1QLKGR3K"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        
        // Initialize Firestore (Required for form submission)
        const db = getFirestore(app);

        // Make handleSessionRequest available globally
        window.handleSessionRequest = async function(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const originalText = btn.innerText;
            const statusDiv = document.getElementById('formStatus');
            
            // Get values directly
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const location = document.getElementById('location').value;
            const service = document.getElementById('service').value;
            const message = document.getElementById('message').value;

            btn.disabled = true;
            btn.innerText = 'Transmitting...';
            btn.classList.add('opacity-75', 'cursor-not-allowed');

            try {
                // Add a new document with a generated id to "session_requests" collection
                const docRef = await addDoc(collection(db, "session_requests"), {
                    name: name,
                    email: email,
                    phone: phone,
                    location: location,
                    service: service,
                    message: message,
                    timestamp: serverTimestamp(),
                    source: "intake_form_page"
                });

                console.log("Document written with ID: ", docRef.id);
                
                statusDiv.innerHTML = `<div class="mt-4 p-4 bg-sage/10 text-sage border border-sage rounded text-xs font-bold tracking-widest uppercase animate-pulse">Hari Om! Request Sent Successfully</div>`;
                document.getElementById('detailedForm').reset();

            } catch (error) {
                console.error("Error adding document: ", error);
                statusDiv.innerHTML = `<div class="mt-4 text-red-600 text-xs">There was an issue sending your request. Please try again.</div>`;
            } finally {
                setTimeout(() => {
                    btn.disabled = false;
                    btn.innerText = originalText;
                    btn.classList.remove('opacity-75', 'cursor-not-allowed');
                }, 4000);
            }
        }
    </script>

    <!-- General Script -->
    <script>
        lucide.createIcons();

        // GSAP Entry Animation
        window.addEventListener('load', () => {
            gsap.to(".fade-in-up", { opacity: 1, y: 0, duration: 1, ease: "power3.out" });
        });
    </script>
</body>
</html>
