<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Sangha | Samarpan Blog</title>
    
    <!-- --- SEO & META TAGS --- -->
    <meta name="description" content="Articles on Ayurveda Biology, Neurobiology, Psychology and Tantra by Harsh Ranjan.">
    <meta name="author" content="Harsh Ranjan">

    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22 fill=%22none%22 stroke=%22%23C88D72%22 stroke-width=%224%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22/><path d=%22M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z%22/><circle cx=%2250%22 cy=%2285%22 r=%223%22 fill=%22%23C88D72%22/></svg>">

    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Manrope:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        paper: '#FDFCF8',
                        clay: '#C88D72',
                        claydark: '#A6755E',
                        sage: '#4A5D4F',
                        charcoal: '#1A1A1A',
                        offblack: '#121212'
                    },
                    fontFamily: {
                        sans: ['Manrope', 'sans-serif'],
                        serif: ['Cormorant Garamond', 'serif'],
                        display: ['Cinzel', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #FDFCF8; color: #1A1A1A; }
        
        /* Typography for Blog Content */
        .article-content h3 { font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; margin-top: 2rem; margin-bottom: 1rem; color: #1A1A1A; font-weight: 600; }
        .article-content p { margin-bottom: 1.5rem; line-height: 1.8; color: #4a4a4a; }
        .article-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1.5rem; color: #4a4a4a; }
        .article-content li { margin-bottom: 0.5rem; }
        .article-content strong { color: #C88D72; font-weight: 600; }
        
        /* Modal Animation */
        #readModal { transition: opacity 0.3s ease-in-out, visibility 0.3s; }
        #readModal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #readModal:not(.hidden) { opacity: 1; visibility: visible; pointer-events: auto; }
        
        /* Mobile Menu */
        #mobile-menu { transition: transform 0.3s ease-in-out; }

        /* Custom Scrollbar (Matches Index) */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #E5E5E5; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #C88D72; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #A6755E; }

        /* Toast Notification */
        #toast {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateY(20px);
        }
        #toast.show {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="antialiased selection:bg-clay selection:text-white">

    <!-- NAVBAR -->
    <nav id="navbar" class="fixed w-full z-50 bg-paper/95 backdrop-blur-md border-b border-clay/10 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-2 group">
                <svg width="30" height="30" viewBox="0 0 100 100" fill="none" class="text-clay group-hover:scale-110 transition">
                    <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="85" r="3" fill="currentColor"/>
                </svg>
                <span class="text-[10px] uppercase tracking-[0.25em] font-display font-bold text-clay">Samarpan</span>
            </a>
            <!-- Desktop Links -->
            <div class="hidden lg:flex space-x-10 items-center">
                <a href="index.html" class="font-sans text-xs uppercase tracking-[0.2em] hover:text-clay transition">Home</a>
                <a href="about.html" class="font-sans text-xs uppercase tracking-[0.2em] hover:text-clay transition">About</a>
                <a href="#" class="font-sans text-xs uppercase tracking-[0.2em] text-clay font-bold">Blog</a>
                <a href="contact.html" class="px-5 py-2 bg-clay text-white hover:bg-claydark transition font-display text-xs tracking-widest rounded-sm">Contact</a>
            </div>
            <!-- Mobile Menu Btn -->
            <button class="lg:hidden text-clay" onclick="toggleMobileMenu()"><i data-lucide="menu"></i></button>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden fixed inset-0 bg-paper z-40 flex-col items-center justify-center space-y-8">
            <button class="absolute top-6 right-6 text-clay" onclick="toggleMobileMenu()"><i data-lucide="x" class="w-8 h-8"></i></button>
            <a href="index.html" class="font-serif text-2xl text-charcoal">Home</a>
            <a href="about.html" class="font-serif text-2xl text-charcoal">About</a>
            <a href="#" class="font-serif text-2xl text-clay">Blog</a>
            <a href="contact.html" class="font-serif text-2xl text-charcoal">Contact</a>
        </div>
    </nav>

    <!-- HEADER -->
    <header class="pt-40 pb-16 px-6 bg-[#FAFAF8] text-center border-b border-clay/10">
        <p class="font-display text-xs tracking-[0.4em] text-clay mb-4">Digital Sangha</p>
        <h1 class="text-5xl md:text-7xl font-serif text-charcoal mb-6">The Knowledge Stream</h1>
        <p class="font-sans text-charcoal/60 max-w-xl mx-auto text-lg">
            Musings on the intersection of Ayurveda Biology, Psychology, and the Neurobiology of Consciousness.
        </p>
    </header>

    <!-- FILTER BUTTONS -->
    <section class="py-8 px-6 sticky top-[70px] z-30 bg-paper/95 backdrop-blur-sm border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto flex flex-wrap justify-center gap-4">
            <button onclick="filterPosts('all')" class="filter-btn active px-4 py-2 text-xs uppercase tracking-widest border border-clay bg-clay text-white transition rounded-full hover:bg-claydark">All</button>
            <button onclick="filterPosts('Ayurveda')" class="filter-btn px-4 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Ayurveda</button>
            <button onclick="filterPosts('Psychology')" class="filter-btn px-4 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Psychology</button>
            <button onclick="filterPosts('Neurobiology')" class="filter-btn px-4 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Neurobiology</button>
            <button onclick="filterPosts('Tantra')" class="filter-btn px-4 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Tantra & Yoga</button>
        </div>
    </section>

    <!-- BLOG GRID -->
    <section class="py-16 px-6 min-h-screen">
        <div id="blog-container" class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Posts injected by JS -->
        </div>
    </section>

    <!-- READING MODAL -->
    <div id="readModal" class="fixed inset-0 z-[100] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-charcoal/90 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <!-- Content Container -->
        <div class="absolute inset-0 md:inset-10 bg-paper md:rounded-lg overflow-y-auto custom-scrollbar shadow-2xl">
            <!-- Close Button -->
            <button onclick="closeModal()" class="fixed top-4 right-4 md:top-14 md:right-14 z-50 bg-white rounded-full p-2 text-charcoal shadow-lg hover:text-red-500 transition border border-gray-200">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <!-- Article Content -->
            <div class="max-w-3xl mx-auto px-6 py-16 md:py-24">
                <div class="text-center mb-12">
                    <span id="modal-category" class="text-clay font-display text-xs tracking-[0.3em] uppercase block mb-3">Category</span>
                    <h2 id="modal-title" class="text-3xl md:text-5xl font-serif text-charcoal mb-6 leading-tight">Article Title</h2>
                    <div class="flex items-center justify-center gap-4 text-xs text-gray-400 font-sans uppercase tracking-widest">
                        <span id="modal-date">Date</span> • <span id="modal-readtime">5 Min Read</span>
                    </div>
                </div>

                <div class="w-full h-64 md:h-96 overflow-hidden rounded-lg mb-12 shadow-md bg-gray-100">
                    <img id="modal-image" src="" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?auto=format&fit=crop&q=80&w=2074'">
                </div>

                <div id="modal-body" class="article-content font-serif text-lg md:text-xl text-charcoal/80 leading-relaxed">
                    <!-- Text injected here -->
                </div>

                <!-- Modal Footer -->
                <div class="mt-16 pt-8 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-clay text-white flex items-center justify-center font-serif text-xl font-bold">
                            H
                        </div>
                        <div>
                            <p class="font-serif font-bold text-charcoal">Harsh Ranjan</p>
                            <p class="text-xs text-gray-500 uppercase tracking-widest">Author</p>
                        </div>
                    </div>
                    
                    <button onclick="shareCurrentPost()" class="flex items-center gap-2 px-6 py-3 bg-sage/10 text-sage rounded-full hover:bg-sage hover:text-white transition font-bold text-xs uppercase tracking-widest border border-sage/20">
                        <i data-lucide="share-2" class="w-4 h-4"></i> Share Article
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-charcoal text-white px-6 py-3 rounded-full shadow-2xl z-[150] flex items-center gap-3 text-xs uppercase tracking-widest border border-clay/50">
        <i data-lucide="check-circle" class="w-4 h-4 text-clay"></i>
        <span id="toast-msg">Link Copied!</span>
    </div>

    <!-- FOOTER (MATCHING INDEX.HTML) -->
    <footer class="bg-offblack text-white/60 py-16 px-6 border-t border-white/10">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
            
            <!-- Col 1: Brand -->
            <div class="col-span-1 md:col-span-2">
                <svg width="48" height="48" viewBox="0 0 100 100" fill="none" class="text-clay mb-4">
                    <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="85" r="4" fill="currentColor"/>
                    <path d="M20 50H80" stroke="currentColor" stroke-width="1.5" stroke-opacity="0.6"/>
                </svg>
                <h4 class="font-display text-lg tracking-widest text-paper mb-4">SAMARPAN</h4>
                <p class="text-sm leading-relaxed max-w-sm">Bridging ancient wisdom with modern science for holistic well-being.</p>
            </div>

            <!-- Col 2: Links -->
            <div>
                <h5 class="text-clay font-display text-xs tracking-widest uppercase mb-6">Links</h5>
                <ul class="space-y-3 text-sm">
                    <li><a href="sessions.html" class="hover:text-white transition duration-300">Sessions</a></li>
                    <li><a href="ayurveda.html" class="hover:text-white transition duration-300">Ayurveda</a></li>
                    <li><a href="blog.html" class="hover:text-white transition duration-300">Blog</a></li>
                    <li><a href="contact.html" class="hover:text-white transition duration-300">Contact</a></li>
                </ul>
            </div>

            <!-- Col 3: Contact -->
            <div>
                <h5 class="text-clay font-display text-xs tracking-widest uppercase mb-6">Contact</h5>
                <ul class="space-y-3 text-sm">
                    <li>
                        <a href="mailto:justtheself@gmail.com" class="hover:text-white transition duration-300 flex items-center gap-2">
                            <i data-lucide="mail" class="w-4 h-4"></i> justtheself@gmail.com
                        </a>
                    </li>
                    <li class="flex items-center gap-2">
                        <i data-lucide="map-pin" class="w-4 h-4"></i> New Delhi, India
                    </li>
                </ul>
                <div class="flex gap-4 mt-6">
                    <a href="https://youtu.be/1v1fOuvBlE8?si=3Tzq9I4JKfVuNo0o" target="_blank" class="hover:text-clay transition"><i data-lucide="youtube" class="w-5 h-5"></i></a>
                    <a href="https://www.instagram.com/justtheself/" target="_blank" class="hover:text-clay transition"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    <a href="https://www.linkedin.com/in/theharshranjanofficial/" target="_blank" class="hover:text-clay transition"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                </div>
            </div>

        </div>
        <div class="max-w-7xl mx-auto mt-16 pt-8 border-t border-white/10 text-center md:text-left text-xs text-white/30 font-sans">
            &copy; 2026 Harsh Ranjan (Samarpan). All Rights Reserved.
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        lucide.createIcons();

        // ==========================================
        // --- BLOG DATA (ADD NEW POSTS HERE) ---
        // ==========================================
        // Copy a block from { to }, paste it at the top, and edit.
        
        const blogPosts = [
            {
                id: 1,
                title: "The Neurobiology of Mantra",
                category: "Neurobiology",
                date: "Nov 15, 2025",
                readTime: "6 Min Read",
                image: "https://images.unsplash.com/photo-1554244933-d877debbd96c?q=80&w=2070&auto=format&fit=crop",
                excerpt: "How sound vibrations restructure neural pathways and influence the Default Mode Network.",
                content: `
                    <p>In our modern understanding of the brain, the Default Mode Network (DMN) is often associated with the 'wandering mind'—the source of anxiety, self-referential thoughts, and rumination. Ancient traditions, particularly within Tantra, have long used sound (Mantra) as a tool to silence this chatter.</p>
                    
                    <h3>Sound as Medicine</h3>
                    <p>Recent neurobiological studies suggest that rhythmic chanting (Japa) significantly reduces activity in the amygdala, the brain's fear center. When we chant, we are not just making noise; we are creating a specific frequency that entrains the brainwaves.</p>
                    
                    <h3>The Vagus Nerve Connection</h3>
                    <p>The vibration created by vocalizing specific seeds sounds (Beej Mantras) like 'Om', 'Lam', or 'Ram' stimulates the Vagus nerve. This stimulation activates the parasympathetic nervous system, instantly shifting the body from 'fight or flight' to 'rest and digest'.</p>
                    
                    <p>This is where Ayurveda Biology meets Psychology. By regulating the biological nervous system through sound, we create the psychological space necessary for deep healing.</p>
                `
            },
            {
                id: 2,
                title: "Understanding Your Prakriti",
                category: "Ayurveda",
                date: "Oct 28, 2025",
                readTime: "5 Min Read",
                image: "https://images.unsplash.com/photo-1507120410856-1f35574c3b45?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Your biological constitution determines how you interact with the world. Are you Vata, Pitta, or Kapha?",
                content: `
                    <p>Ayurveda is not just about herbs; it is about understanding the fundamental biology of your being. In Ayurveda Biology, we look at the genetic and phenotypic expression of the three Doshas: Vata, Pitta, and Kapha.</p>
                    
                    <h3>The Three Forces</h3>
                    <ul>
                        <li><strong>Vata (Air/Ether):</strong> The force of movement. Governs the nervous system and elimination.</li>
                        <li><strong>Pitta (Fire/Water):</strong> The force of transformation. Governs metabolism and digestion.</li>
                        <li><strong>Kapha (Earth/Water):</strong> The force of stability. Governs structure and lubrication.</li>
                    </ul>
                    
                    <p>Knowing your unique ratio (Prakriti) allows us to tailor nutrition and psychology protocols. A Vata mind needs grounding, while a Kapha mind needs stimulation. One size does not fit all.</p>
                `
            },
            {
                id: 3,
                title: "Tatwa Shuddhi: Elemental Purification",
                category: "Tantra",
                date: "Sep 10, 2025",
                readTime: "8 Min Read",
                image: "https://images.unsplash.com/photo-1518241353330-0f7941c2d9b5?q=80&w=2525&auto=format&fit=crop",
                excerpt: "A deep dive into the Tantric practice of purifying the five elements within the body.",
                content: `
                    <p>Tatwa Shuddhi is a profound practice from the Tantric tradition designed to purify the subtle elements (Earth, Water, Fire, Air, Space) that constitute our psychophysical existence.</p>
                    <h3>The Psychological Impact</h3>
                    <p>While often viewed as a ritual, biologically and psychologically, this practice is a method of 'sensory withdrawal' (Pratyahara) and cognitive reframing. By visualizing the dissolution of the heavy earth element into water, water into fire, and so on, we train the mind to let go of physical attachment.</p>
                    <p>This reduces the rigidity of the ego and allows for a more fluid experience of reality, essential for overcoming deep-seated trauma or stagnation.</p>
                `
            },
            {
                id: 4,
                title: "Public Health Nutrition & Ayurveda",
                category: "Ayurveda",
                date: "Aug 05, 2025",
                readTime: "4 Min Read",
                image: "https://images.unsplash.com/photo-1490645935967-10de6ba17061?q=80&w=2053&auto=format&fit=crop",
                excerpt: "Bridging the gap between modern public health policies and personalized Ayurvedic nutrition.",
                content: `
                    <p>Modern public health nutrition focuses on macronutrients and calories. While valid, it often misses the nuance of 'Agni' (digestive fire). Two people can eat the same salad; one digests it, the other gets bloated.</p>
                    <p>Integrating Ayurvedic principles into public health means teaching people not just *what* to eat, but *how* to eat according to their metabolic capacity. This simple shift could revolutionize preventative healthcare.</p>
                `
            },
            {
                id: 5,
                title: "Vigyan Bhairav Tantra: The 112 Techniques",
                category: "Tantra",
                date: "July 20, 2025",
                readTime: "7 Min Read",
                image: "https://images.unsplash.com/photo-1528319725582-ddc096101511?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Exploring the manual of consciousness. Techniques for every personality type.",
                content: `
                    <p>The Vigyan Bhairav Tantra is not a philosophical text; it is a manual of 112 techniques to access expanded states of consciousness. It is incredibly psychological in nature.</p>
                    <p>Some techniques use breath (Prana), others use intense emotion, and some use the void of silence. The beauty of this text is that it offers a gateway for every psychological disposition. You do not need to force a meditation style that doesn't fit you; you simply need to find the technique that resonates with your biology.</p>
                `
            }
        ];

        // ==========================================
        // --- RENDERING LOGIC ---
        // ==========================================

        const container = document.getElementById('blog-container');
        let currentPostId = null;

        // 1. Render Posts
        function renderPosts(filter = 'all') {
            container.innerHTML = ''; // Clear existing
            
            const filteredPosts = filter === 'all' 
                ? blogPosts 
                : blogPosts.filter(post => post.category === filter || (filter === 'Tantra' && (post.category === 'Tantra' || post.category === 'Yoga')));

            filteredPosts.forEach(post => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-xl transition duration-500 group border border-gray-100 flex flex-col h-full";
                card.innerHTML = `
                    <div class="h-56 overflow-hidden relative cursor-pointer" onclick="openModal(${post.id})">
                        <img src="${post.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-700" onerror="this.src='https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?auto=format&fit=crop&q=80&w=2074'">
                        <span class="absolute top-4 left-4 bg-white/90 backdrop-blur text-charcoal px-3 py-1 text-[10px] uppercase tracking-widest font-bold rounded-sm">${post.category}</span>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <div class="flex justify-between items-center text-xs text-gray-400 mb-3 font-sans">
                            <span>${post.date}</span>
                            <span>${post.readTime}</span>
                        </div>
                        <h3 class="text-2xl font-serif text-charcoal mb-3 leading-tight group-hover:text-clay transition cursor-pointer" onclick="openModal(${post.id})">${post.title}</h3>
                        <p class="text-sm text-gray-500 mb-6 flex-grow leading-relaxed">${post.excerpt}</p>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-100 mt-auto">
                            <button onclick="openModal(${post.id})" class="text-xs font-bold uppercase tracking-widest text-clay hover:text-charcoal transition flex items-center gap-1">
                                Read Article <i data-lucide="arrow-right" class="w-3 h-3"></i>
                            </button>
                            <button onclick="copyLink(${post.id})" class="text-gray-300 hover:text-sage transition p-2" title="Copy Link">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
            lucide.createIcons();
        }

        // 2. Filter Logic
        function filterPosts(category) {
            // Update buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-clay', 'text-white');
                btn.classList.add('text-charcoal', 'border-clay/30');
                if (btn.textContent.includes(category) || (category === 'all' && btn.textContent === 'All')) {
                    btn.classList.remove('text-charcoal', 'border-clay/30');
                    btn.classList.add('bg-clay', 'text-white');
                }
            });
            renderPosts(category);
        }

        // 3. Modal Logic
        function openModal(id) {
            const post = blogPosts.find(p => p.id === id);
            if (!post) return;

            currentPostId = id;
            
            // Populate Modal
            document.getElementById('modal-category').innerText = post.category;
            document.getElementById('modal-title').innerText = post.title;
            document.getElementById('modal-date').innerText = post.date;
            document.getElementById('modal-readtime').innerText = post.readTime;
            document.getElementById('modal-image').src = post.image;
            document.getElementById('modal-body').innerHTML = post.content;

            // Show Modal
            document.getElementById('readModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Stop background scrolling

            // Update URL logic (for sharing)
            const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
            window.history.pushState({path:newUrl},'',newUrl);
        }

        function closeModal() {
            document.getElementById('readModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Reset URL
            const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            window.history.pushState({path:newUrl},'',newUrl);
            currentPostId = null;
        }

        // 4. Share Logic
        async function shareCurrentPost() {
            if (!currentPostId) return;
            const post = blogPosts.find(p => p.id === currentPostId);
            const url = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + currentPostId;

            // Try native sharing first (Mobile)
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: post.title,
                        text: post.excerpt,
                        url: url
                    });
                } catch (err) {
                    console.log('Error sharing:', err);
                }
            } else {
                // Desktop fallback
                copyLink(currentPostId);
            }
        }

        function copyLink(id) {
            const url = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
            
            // Robust Clipboard Fallback
            const textArea = document.createElement("textarea");
            textArea.value = url;
            textArea.style.position = "fixed";  // Avoid scrolling to bottom
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) showToast("Link Copied to Clipboard");
                else showToast("Failed to copy link");
            } catch (err) {
                showToast("Failed to copy link");
            }
            
            document.body.removeChild(textArea);
        }

        // 5. Toast Notification Logic
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                menu.classList.add('flex');
            } else {
                menu.classList.add('hidden');
                menu.classList.remove('flex');
            }
        }

        // 6. Initialize
        window.onload = () => {
            renderPosts();
            
            // Check for URL params to open specific post on load (e.g. blog.html?id=2)
            const urlParams = new URLSearchParams(window.location.search);
            const id = parseInt(urlParams.get('id'));
            if (id) {
                openModal(id);
            }
        };

    </script>
</body>
</html>
