<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Sangha | Samarpan Blog</title>
    
    <!-- --- SEO & META TAGS --- -->
    <meta name="description" content="Articles on Ayurveda Biology, Neurobiology, Psychology and Yoga by Harsh Ranjan.">
    <meta name="author" content="Harsh Ranjan">

    <!-- GOOGLE ANALYTICS (Tracking Code) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HMM7CJSCW7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HMM7CJSCW7');
    </script>

    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22 fill=%22none%22 stroke=%22%23C88D72%22 stroke-width=%224%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22/><path d=%22M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z%22/><circle cx=%2250%22 cy=%2285%22 r=%223%22 fill=%22%23C88D72%22/></svg>">

    <!-- LIBRARIES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Manrope:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- CONFIG -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        paper: '#FDFCF8',
                        clay: '#C88D72',
                        claydark: '#A6755E',
                        sage: '#4A5D4F',
                        charcoal: '#1A1A1A',
                        offblack: '#121212'
                    },
                    fontFamily: {
                        sans: ['Manrope', 'sans-serif'],
                        serif: ['Cormorant Garamond', 'serif'],
                        display: ['Cinzel', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #FDFCF8; color: #1A1A1A; }
        
        /* --- EDITORIAL TYPOGRAPHY --- */
        .article-content h3 { font-family: 'Cormorant Garamond', serif; font-size: 1.8rem; margin-top: 2.5rem; margin-bottom: 1rem; color: #1A1A1A; font-weight: 600; }
        .article-content p { margin-bottom: 1.5rem; line-height: 1.9; color: #333; font-size: 1.1rem; }
        .article-content ul { list-style-type: none; padding-left: 0; margin-bottom: 1.5rem; }
        .article-content li { margin-bottom: 0.8rem; padding-left: 1.5rem; position: relative; }
        .article-content li::before { content: "•"; color: #C88D72; position: absolute; left: 0; font-weight: bold; }
        .article-content strong { color: #C88D72; font-weight: 600; }
        
        /* Blockquote Styling */
        .article-content blockquote {
            border-left: 4px solid #C88D72;
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-size: 1.4rem;
            color: #555;
            background: #FDFCF8;
        }

        /* Drop Cap (First Letter) */
        .article-content > p:first-of-type::first-letter {
            float: left;
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            line-height: 0.8;
            padding-right: 0.5rem;
            padding-top: 0.3rem;
            color: #C88D72;
        }
        
        /* Modal Animation */
        #readModal { transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1), visibility 0.4s; }
        #readModal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #readModal:not(.hidden) { opacity: 1; visibility: visible; pointer-events: auto; }
        
        /* Scroll Progress Bar */
        #scroll-progress { width: 0%; height: 4px; background: #C88D72; position: fixed; top: 0; left: 0; z-index: 60; transition: width 0.1s; }

        /* Mobile Menu */
        #mobile-menu { transition: transform 0.3s ease-in-out; }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #C88D72; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #A6755E; }

        /* Toast Notification */
        #toast {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateY(20px);
        }
        #toast.show { visibility: visible; opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="antialiased selection:bg-clay selection:text-white">

    <!-- NAVBAR -->
    <nav id="navbar" class="fixed w-full z-50 bg-paper/95 backdrop-blur-md border-b border-clay/10 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            
            <!-- LOGO -->
            <a href="index.html" class="group flex flex-col items-center justify-center">
                <svg width="36" height="36" viewBox="0 0 100 100" fill="none" class="text-clay mb-0.5 group-hover:scale-110 transition duration-500 drop-shadow-md">
                    <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 15C50 15 70 40 70 55C70 66.0457 61.0457 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="85" r="3" fill="currentColor"/>
                    <path d="M20 50H80" stroke="currentColor" stroke-width="1.5" stroke-opacity="0.8"/>
                </svg>
                <span id="nav-logo-text" class="text-[12px] uppercase tracking-[0.25em] font-display font-bold text-clay group-hover:text-charcoal transition drop-shadow-sm">
                    Samarpan
                </span>
            </a>

            <!-- DESKTOP LINKS -->
            <div class="hidden lg:flex space-x-10 items-center">
                <a href="about.html" class="font-sans text-xs uppercase tracking-[0.2em] hover:text-clay transition duration-300">About</a>
                <a href="sessions.html" class="font-sans text-xs uppercase tracking-[0.2em] hover:text-clay transition duration-300">Sessions</a>
                <a href="ayurveda.html" class="font-sans text-xs uppercase tracking-[0.2em] hover:text-clay transition duration-300">Ayurveda</a>
                <a href="#" class="font-sans text-xs uppercase tracking-[0.2em] text-clay font-bold transition duration-300">Blog</a>
                <a href="contact.html" class="px-6 py-2 bg-clay text-white hover:bg-claydark transition duration-300 font-display text-xs tracking-widest shadow-lg border border-transparent">Contact</a>
            </div>

            <!-- MOBILE MENU BTN -->
            <button class="lg:hidden text-clay z-50" onclick="toggleMobileMenu()">
                <i data-lucide="menu" class="w-8 h-8"></i>
            </button>
        </div>
        
        <!-- MOBILE MENU -->
        <div id="mobile-menu" class="hidden fixed inset-0 bg-paper z-40 flex-col items-center justify-center space-y-8">
            <button class="absolute top-6 right-6 text-clay" onclick="toggleMobileMenu()"><i data-lucide="x" class="w-8 h-8"></i></button>
            <a href="about.html" class="font-serif text-2xl text-charcoal">About</a>
            <a href="sessions.html" class="font-serif text-2xl text-charcoal">Sessions</a>
            <a href="ayurveda.html" class="font-serif text-2xl text-charcoal">Ayurveda</a>
            <a href="#" class="font-serif text-2xl text-clay">Blog</a>
            <a href="contact.html" class="px-8 py-3 bg-clay text-white font-serif text-lg font-bold w-full text-center">Contact</a>
        </div>
    </nav>

    <!-- HEADER -->
    <header class="pt-40 pb-16 px-6 bg-[#FAFAF8] text-center border-b border-clay/10">
        <p class="font-display text-xs tracking-[0.4em] text-clay mb-4 animate-float">Digital Sangha</p>
        <h1 class="text-5xl md:text-7xl font-serif text-charcoal mb-6">The Knowledge Stream</h1>
        <p class="font-sans text-charcoal/60 max-w-xl mx-auto text-lg">
            Bridging ancient wisdom with modern science. Insights on Ayurveda Biology, Psychology, and the Neurobiology of Consciousness.
        </p>
    </header>

    <!-- FILTER BUTTONS -->
    <section class="py-8 px-6 sticky top-[80px] z-30 bg-paper/95 backdrop-blur-sm border-b border-gray-100 shadow-sm transition-all">
        <div class="max-w-7xl mx-auto flex flex-wrap justify-center gap-x-6 gap-y-4">
            <button onclick="filterPosts('all')" class="filter-btn active px-6 py-2 text-xs uppercase tracking-widest border border-clay bg-clay text-white transition rounded-full hover:bg-claydark">All</button>
            <button onclick="filterPosts('Ayurveda')" class="filter-btn px-6 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Ayurveda</button>
            <button onclick="filterPosts('Psychology')" class="filter-btn px-6 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Psychology</button>
            <button onclick="filterPosts('Neurobiology')" class="filter-btn px-6 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Neurobiology</button>
            <button onclick="filterPosts('Yoga')" class="filter-btn px-6 py-2 text-xs uppercase tracking-widest border border-clay/30 text-charcoal transition rounded-full hover:border-clay hover:text-clay">Yoga</button>
        </div>
    </section>

    <!-- BLOG GRID -->
    <section class="py-12 px-6 min-h-screen bg-[#FAFAF8]">
        <div id="blog-container" class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Posts injected by JS -->
        </div>
    </section>

    <!-- READING MODAL -->
    <div id="readModal" class="fixed inset-0 z-[100] hidden">
        <!-- Progress Bar -->
        <div id="scroll-progress"></div>

        <!-- Backdrop -->
        <div class="absolute inset-0 bg-charcoal/95 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <!-- Content Container -->
        <div class="absolute inset-0 md:inset-10 bg-paper md:rounded-lg overflow-y-auto custom-scrollbar shadow-2xl" onscroll="updateProgress()">
            <!-- Close Button -->
            <button onclick="closeModal()" class="sticky top-4 right-4 float-right z-50 bg-white rounded-full p-2 text-charcoal shadow-lg hover:text-clay transition border border-gray-200 group">
                <i data-lucide="x" class="w-6 h-6 group-hover:rotate-90 transition duration-300"></i>
            </button>

            <!-- Article Content -->
            <div class="max-w-3xl mx-auto px-6 py-16 md:py-24">
                <div class="text-center mb-12">
                    <span id="modal-category" class="text-clay font-display text-xs tracking-[0.3em] uppercase block mb-4 border-b border-clay/20 inline-block pb-1">Category</span>
                    <h2 id="modal-title" class="text-3xl md:text-5xl font-serif text-charcoal mb-6 leading-[1.1]">Article Title</h2>
                    <div class="flex items-center justify-center gap-4 text-xs text-gray-400 font-sans uppercase tracking-widest">
                        <span id="modal-date">Date</span> • <span id="modal-readtime">Read Time</span>
                    </div>
                </div>

                <div class="w-full h-64 md:h-[450px] overflow-hidden rounded-sm mb-12 shadow-md bg-gray-100">
                    <img id="modal-image" src="" class="w-full h-full object-cover">
                </div>

                <div id="modal-body" class="article-content font-serif text-lg md:text-xl text-charcoal/80 leading-relaxed px-2 md:px-0">
                    <!-- Text injected here -->
                </div>

                <!-- Author & Share -->
                <div class="mt-20 pt-10 border-t border-gray-200 flex flex-col md:flex-row justify-between items-center gap-8">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-full bg-clay text-white flex items-center justify-center font-serif text-2xl font-bold shadow-md">
                            H
                        </div>
                        <div>
                            <p class="font-serif font-bold text-lg text-charcoal">Harsh Ranjan</p>
                            <p class="text-[10px] text-gray-500 uppercase tracking-widest">Ayurveda Biologist & Psychologist</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-3">
                        <button onclick="shareCurrentPost()" class="flex items-center gap-2 px-8 py-3 bg-charcoal text-white rounded-full hover:bg-clay transition font-bold text-xs uppercase tracking-widest shadow-lg">
                            <i data-lucide="share-2" class="w-4 h-4"></i> Share
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-charcoal text-white px-6 py-3 rounded-full shadow-2xl z-[150] flex items-center gap-3 text-xs uppercase tracking-widest border border-clay/50">
        <i data-lucide="check-circle" class="w-4 h-4 text-clay"></i>
        <span id="toast-msg">Link Copied!</span>
    </div>

    <!-- FOOTER (MATCHING INDEX.HTML) -->
    <footer class="bg-offblack text-white/60 py-16 px-6 border-t border-white/10">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
            
            <!-- Col 1: Brand -->
            <div class="col-span-1 md:col-span-2">
                <svg width="48" height="48" viewBox="0 0 100 100" fill="none" class="text-clay mb-4">
                    <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3"/>
                    <path d="M50 15C50 15 70 40 70 55C70 66 61 75 50 75C39 75 30 66 30 55C30 40 50 15 50 15Z" stroke="currentColor" stroke-width="3"/>
                    <circle cx="50" cy="85" r="4" fill="currentColor"/>
                    <path d="M20 50H80" stroke="currentColor" stroke-width="1.5" stroke-opacity="0.6"/>
                </svg>
                <h4 class="font-display text-lg tracking-widest text-paper mb-4">SAMARPAN</h4>
                <p class="text-sm leading-relaxed max-w-sm">Bridging ancient wisdom with modern science for holistic well-being.</p>
            </div>

            <!-- Col 2: Links -->
            <div>
                <h5 class="text-clay font-display text-xs tracking-widest uppercase mb-6">Links</h5>
                <ul class="space-y-3 text-sm">
                    <li><a href="sessions.html" class="hover:text-white transition duration-300">Sessions</a></li>
                    <li><a href="ayurveda.html" class="hover:text-white transition duration-300">Ayurveda</a></li>
                    <li><a href="#" class="hover:text-white transition duration-300">Blog</a></li>
                    <li><a href="contact.html" class="hover:text-white transition duration-300">Contact</a></li>
                </ul>
            </div>

            <!-- Col 3: Contact -->
            <div>
                <h5 class="text-clay font-display text-xs tracking-widest uppercase mb-6">Contact</h5>
                <ul class="space-y-3 text-sm">
                    <li>
                        <a href="mailto:justtheself@gmail.com" class="hover:text-white transition duration-300 flex items-center gap-2">
                            <i data-lucide="mail" class="w-4 h-4"></i> justtheself@gmail.com
                        </a>
                    </li>
                    <li class="flex items-center gap-2">
                        <i data-lucide="map-pin" class="w-4 h-4"></i> New Delhi, India
                    </li>
                </ul>
                <div class="flex gap-4 mt-6">
                    <a href="https://youtu.be/1v1fOuvBlE8?si=3Tzq9I4JKfVuNo0o" target="_blank" class="hover:text-clay transition"><i data-lucide="youtube" class="w-5 h-5"></i></a>
                    <a href="https://www.instagram.com/justtheself/" target="_blank" class="hover:text-clay transition"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    <a href="https://www.linkedin.com/in/theharshranjanofficial/" target="_blank" class="hover:text-clay transition"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                </div>
            </div>

        </div>
        <div class="max-w-7xl mx-auto mt-16 pt-8 border-t border-white/10 text-center md:text-left text-xs text-white/30 font-sans">
            &copy; 2026 Harsh Ranjan (Samarpan). All Rights Reserved.
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        lucide.createIcons();

        // ==========================================
        // --- BLOG DATA ---
        // ==========================================
        
        const blogPosts = [
            {
                id: 1,
                title: "The Neurobiology of Mantra",
                category: "Neurobiology",
                date: "Nov 15, 2025",
                readTime: "6 Min Read",
                image: "https://images.unsplash.com/photo-1554244933-d877debbd96c?q=80&w=2070&auto=format&fit=crop",
                excerpt: "How sound vibrations restructure neural pathways and influence the Default Mode Network.",
                content: `
                    <p>In our modern understanding of the brain, the Default Mode Network (DMN) is often associated with the 'wandering mind'—the source of anxiety, self-referential thoughts, and rumination. Ancient traditions, particularly within Tantra, have long used sound (Mantra) as a tool to silence this chatter.</p>
                    
                    <blockquote>"When we chant, we are not just making noise; we are creating a specific frequency that entrains the brainwaves."</blockquote>

                    <h3>Sound as Medicine</h3>
                    <p>Recent neurobiological studies suggest that rhythmic chanting (Japa) significantly reduces activity in the amygdala, the brain's fear center. This isn't magic; it's physics. The frequency disrupts the stress loops.</p>
                    
                    <h3>The Vagus Nerve Connection</h3>
                    <p>The vibration created by vocalizing specific seeds sounds (Beej Mantras) like 'Om', 'Lam', or 'Ram' stimulates the Vagus nerve. This stimulation activates the parasympathetic nervous system, instantly shifting the body from 'fight or flight' to 'rest and digest'.</p>
                    
                    <ul>
                        <li><strong>Beta Waves:</strong> Active thought (Normal waking state).</li>
                        <li><strong>Alpha Waves:</strong> Relaxed alertness (Induced by Mantra).</li>
                        <li><strong>Theta Waves:</strong> Deep meditation/Sleep (The goal of Yoga Nidra).</li>
                    </ul>

                    <p>This is where Ayurveda Biology meets Psychology. By regulating the biological nervous system through sound, we create the psychological space necessary for deep healing.</p>
                `
            },
            {
                id: 2,
                title: "Understanding Your Prakriti",
                category: "Ayurveda",
                date: "Oct 28, 2025",
                readTime: "5 Min Read",
                image: "https://images.unsplash.com/photo-1507120410856-1f35574c3b45?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Your biological constitution determines how you interact with the world. Are you Vata, Pitta, or Kapha?",
                content: `
                    <p>Ayurveda is not just about herbs; it is about understanding the fundamental biology of your being. In Ayurveda Biology, we look at the genetic and phenotypic expression of the three Doshas: Vata, Pitta, and Kapha.</p>
                    
                    <h3>The Three Forces</h3>
                    <ul>
                        <li><strong>Vata (Air/Ether):</strong> The force of movement. Governs the nervous system, creativity, and elimination.</li>
                        <li><strong>Pitta (Fire/Water):</strong> The force of transformation. Governs metabolism, intelligence, and digestion.</li>
                        <li><strong>Kapha (Earth/Water):</strong> The force of stability. Governs structure, memory, and lubrication.</li>
                    </ul>
                    
                    <p>Knowing your unique ratio (Prakriti) allows us to tailor nutrition and psychology protocols. A Vata mind needs grounding foods and routine, while a Kapha mind needs stimulation and lighter foods. One size does not fit all in medicine or spirituality.</p>
                `
            },
            {
                id: 3,
                title: "Neuroplasticity: Rewiring the Anxious Brain",
                category: "Neurobiology",
                date: "Jan 03, 2026",
                readTime: "7 Min Read",
                image: "https://images.unsplash.com/photo-1559757175-5700dde675bc?q=80&w=2071&auto=format&fit=crop",
                excerpt: "From 'Neurons that fire together, wire together' to the practical application of mental reframing.",
                content: `
                    <p>The human brain is not static; it is plastic. This concept, known as neuroplasticity, is the scientific basis for all transformation. Every thought you think strengthens a specific neural pathway.</p>
                    <p>Chronic anxiety is essentially a well-worn highway in the brain. The amygdala becomes hyper-sensitive, perceiving threats where there are none.</p>
                    <h3>The Role of Mindfulness</h3>
                    <p>Mindfulness practices, similar to those found in Vigyan Bhairav Tantra, act as a roadblock on this highway. By observing the thought without reacting, we deny the pathway the energy it needs to strengthen. Over time, the anxious pathway degrades (synaptic pruning), and new pathways of calm are forged.</p>
                `
            },
            {
                id: 4,
                title: "Trauma and the Body: A Somatic Approach",
                category: "Psychology",
                date: "Dec 15, 2025",
                readTime: "6 Min Read",
                image: "https://images.unsplash.com/photo-1499209974431-9dddcece7f88?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Why talk therapy isn't always enough. Understanding how trauma is stored in the nervous system.",
                content: `
                    <p>Psychology often focuses on the 'top-down' approach—using the mind to understand the body. However, trauma is often stored in the 'bottom-up' systems: the limbic system and the brainstem.</p>
                    <blockquote>"The body keeps the score." - Bessell van der Kolk</blockquote>
                    <p>Talk therapy interacts with the prefrontal cortex (logic), but trauma lives in the body (sensation). To truly heal, we must incorporate somatic practices. This is where Yoga and Pranayama become therapeutic tools, not just exercise. They allow us to access the nervous system directly and discharge stored kinetic energy.</p>
                `
            },
            {
                id: 5,
                title: "The 112 Gateways of Consciousness",
                category: "Yoga",
                date: "July 20, 2025",
                readTime: "8 Min Read",
                image: "https://images.unsplash.com/photo-1528319725582-ddc096101511?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Exploring the Vigyan Bhairav Tantra. Techniques for every personality type.",
                content: `
                    <p>The Vigyan Bhairav Tantra is not a philosophical text; it is a manual of 112 techniques to access expanded states of consciousness. It is incredibly psychological in nature.</p>
                    <h3>Finding Your Technique</h3>
                    <p>Some techniques use breath (Prana), others use intense emotion, and some use the void of silence. The beauty of this text is that it offers a gateway for every psychological disposition.</p>
                    <ul>
                        <li><strong>For the Intellectual:</strong> Techniques focusing on the gap between thoughts.</li>
                        <li><strong>For the Emotional:</strong> Techniques transforming intense love or anger into awareness.</li>
                        <li><strong>For the Physical:</strong> Techniques utilizing breath retention and sensation.</li>
                    </ul>
                    <p>You do not need to force a meditation style that doesn't fit you; you simply need to find the technique that resonates with your biology.</p>
                `
            },
            {
                id: 6,
                title: "Yoga Nidra: The Neuroscience of Rest",
                category: "Yoga",
                date: "Aug 10, 2025",
                readTime: "5 Min Read",
                image: "https://images.unsplash.com/photo-1506126613408-eca07ce68773?q=80&w=2070&auto=format&fit=crop",
                excerpt: "Why non-sleep deep rest (NSDR) is critical for cognitive recovery and hormonal balance.",
                content: `
                    <p>In a world of constant stimulation, our nervous systems rarely hit 'off'. Sleep is often fragmented. Yoga Nidra, or 'Yogic Sleep', is a state of conscious relaxation that straddles the boundary between waking and sleeping.</p>
                    <p>Biologically, this practice drops the brain into Theta wave dominance. In this state, the glymphatic system (the brain's waste clearance system) becomes highly active, flushing out toxins associated with neurodegeneration. It is also where memory consolidation occurs.</p>
                    <p>20 minutes of Yoga Nidra is often said to be equivalent to 2 hours of sleep in terms of restorative power for the nervous system.</p>
                `
            },
            {
                id: 7,
                title: "Dinacharya: Circadian Rhythms & Gene Expression",
                category: "Ayurveda",
                date: "Sep 05, 2025",
                readTime: "6 Min Read",
                image: "https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&w=2070&auto=format&fit=crop",
                excerpt: "How the ancient Ayurvedic daily routine aligns perfectly with Nobel Prize-winning science on biological clocks.",
                content: `
                    <p>The 2017 Nobel Prize in Physiology was awarded for discoveries of molecular mechanisms controlling the circadian rhythm. Ayurveda has based its entire preventative protocol (Dinacharya) on this for millennia.</p>
                    <h3>Aligning with the Master Clock</h3>
                    <p>Every cell in your body has a clock. When we eat late at night, we disrupt the peripheral clocks in the liver, causing metabolic chaos (or 'Ama' in Ayurveda). Waking up before sunrise (Brahma Muhurta) exposes the eyes to specific light spectrums that regulate cortisol and melatonin production for the rest of the day.</p>
                    <p>Living in alignment with Dinacharya is not old-fashioned; it is bio-hacking in its purest form.</p>
                `
            },
            {
                id: 8,
                title: "Jungian Shadows & The Subconscious",
                category: "Psychology",
                date: "Oct 12, 2025",
                readTime: "7 Min Read",
                image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=1887&auto=format&fit=crop",
                excerpt: "Integrating the 'Shadow Self' for complete psychological wholeness.",
                content: `
                    <p>Carl Jung famously said, "Until you make the unconscious conscious, it will direct your life and you will call it fate." This aligns perfectly with the yogic concept of 'Samskaras' (imprints).</p>
                    <p>The 'Shadow' consists of the parts of ourselves we reject—anger, jealousy, desire. By suppressing them, we give them power. In our psychology sessions, we do not aim to destroy the shadow, but to integrate it.</p>
                    <p>Wholeness requires accepting the totality of the psyche. Only then can true transformation occur.</p>
                `
            },
            {
                id: 9,
                title: "Tatwa Shuddhi: Elemental Purification",
                category: "Yoga",
                date: "Sep 10, 2025",
                readTime: "8 Min Read",
                image: "https://images.unsplash.com/photo-1518241353330-0f7941c2d9b5?q=80&w=2525&auto=format&fit=crop",
                excerpt: "A deep dive into the Tantric practice of purifying the five elements within the body.",
                content: `
                    <p>Tatwa Shuddhi is a profound practice from the Tantric tradition designed to purify the subtle elements (Earth, Water, Fire, Air, Space) that constitute our psychophysical existence.</p>
                    <h3>The Psychological Impact</h3>
                    <p>While often viewed as a ritual, biologically and psychologically, this practice is a method of 'sensory withdrawal' (Pratyahara) and cognitive reframing. By visualizing the dissolution of the heavy earth element into water, water into fire, and so on, we train the mind to let go of physical attachment.</p>
                    <p>This reduces the rigidity of the ego and allows for a more fluid experience of reality, essential for overcoming deep-seated trauma or stagnation.</p>
                `
            }
        ];

        // ==========================================
        // --- RENDERING LOGIC ---
        // ==========================================

        const container = document.getElementById('blog-container');
        let currentPostId = null;

        // 1. Render Posts
        function renderPosts(posts) {
            container.innerHTML = ''; // Clear existing
            
            posts.forEach((post, index) => {
                const card = document.createElement('div');
                card.className = "blog-card bg-white rounded-sm overflow-hidden shadow-sm hover:shadow-xl transition duration-500 group border border-gray-100 flex flex-col h-full opacity-0"; 
                // RESTORED: Category Label on Image with ORIGINAL STYLE
                card.innerHTML = `
                    <div class="h-56 overflow-hidden relative cursor-pointer" onclick="openModal(${post.id})">
                        <img src="${post.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-700" onerror="this.src='https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?auto=format&fit=crop&q=80&w=2074'">
                        <span class="absolute top-4 left-4 bg-white/90 backdrop-blur text-charcoal px-3 py-1 text-[10px] uppercase tracking-widest font-bold rounded-sm border border-gray-200">${post.category}</span>
                    </div>
                    <div class="p-8 flex flex-col flex-grow">
                        <div class="flex justify-between items-center text-[10px] text-gray-400 mb-4 font-sans uppercase tracking-widest">
                            <span>${post.date}</span>
                            <span>${post.readTime}</span>
                        </div>
                        <h3 class="text-2xl font-serif text-charcoal mb-3 leading-tight group-hover:text-clay transition cursor-pointer" onclick="openModal(${post.id})">${post.title}</h3>
                        <p class="text-sm text-gray-500 mb-6 flex-grow leading-relaxed line-clamp-3">${post.excerpt}</p>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-100 mt-auto">
                            <button onclick="openModal(${post.id})" class="text-[10px] font-bold uppercase tracking-widest text-clay hover:text-charcoal transition flex items-center gap-1 group/btn">
                                Read Article <i data-lucide="arrow-right" class="w-3 h-3 group-hover/btn:translate-x-1 transition"></i>
                            </button>
                            <button onclick="copyLink(${post.id})" class="text-gray-300 hover:text-sage transition p-2 hover:bg-gray-50 rounded-full" title="Copy Link">
                                <i data-lucide="share-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
            
            // Animate Cards In
            gsap.to(".blog-card", {
                y: 0,
                opacity: 1,
                duration: 0.6,
                stagger: 0.1,
                ease: "power2.out"
            });
            lucide.createIcons();
        }

        // 2. Filter Logic
        function filterPosts(category) {
            // Update buttons styling
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-clay', 'text-white');
                btn.classList.add('text-charcoal', 'border-clay/30');
                if (btn.innerText === category || (category === 'all' && btn.innerText === 'ALL')) {
                    btn.classList.remove('text-charcoal', 'border-clay/30');
                    btn.classList.add('bg-clay', 'text-white');
                }
            });

            // Do the filtering
            const filtered = category === 'all' 
                ? blogPosts 
                : blogPosts.filter(post => post.category === category);
            
            renderPosts(filtered);
        }

        // 3. Modal Logic
        function openModal(id) {
            const post = blogPosts.find(p => p.id === id);
            if (!post) return;

            currentPostId = id;
            
            // TRACKING: Send event to Google Analytics
            if (typeof gtag === 'function') {
                gtag('event', 'read_article', {
                    'event_category': 'engagement',
                    'event_label': post.title,
                    'value': id
                });
            }

            // Populate Modal
            document.getElementById('modal-category').innerText = post.category;
            document.getElementById('modal-title').innerText = post.title;
            document.getElementById('modal-date').innerText = post.date;
            document.getElementById('modal-readtime').innerText = post.readTime;
            document.getElementById('modal-image').src = post.image;
            document.getElementById('modal-body').innerHTML = post.content;

            // Show Modal
            document.getElementById('readModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; 

            // Update URL logic
            const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
            window.history.pushState({path:newUrl},'',newUrl);
        }

        function closeModal() {
            document.getElementById('readModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            // Reset Progress Bar
            document.getElementById('scroll-progress').style.width = '0%';

            // Reset URL
            const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            window.history.pushState({path:newUrl},'',newUrl);
            currentPostId = null;
        }

        // 4. Scroll Progress Logic
        function updateProgress() {
            const modalContainer = document.querySelector('#readModal > div'); // The scrollable div
            const scrollTop = modalContainer.scrollTop;
            const scrollHeight = modalContainer.scrollHeight - modalContainer.clientHeight;
            const scrolled = (scrollTop / scrollHeight) * 100;
            document.getElementById('scroll-progress').style.width = scrolled + "%";
        }

        // 5. Share Logic
        async function shareCurrentPost() {
            if (!currentPostId) return;
            const post = blogPosts.find(p => p.id === currentPostId);
            const url = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + currentPostId;

            if (navigator.share) {
                try {
                    await navigator.share({
                        title: post.title,
                        text: post.excerpt,
                        url: url
                    });
                } catch (err) {
                    console.log('Error sharing:', err);
                }
            } else {
                copyLink(currentPostId);
            }
        }

        function copyLink(id) {
            const url = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
            
            const textArea = document.createElement("textarea");
            textArea.value = url;
            textArea.style.position = "fixed"; 
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) showToast("Link Copied to Clipboard");
                else showToast("Failed to copy link");
            } catch (err) {
                showToast("Failed to copy link");
            }
            
            document.body.removeChild(textArea);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                menu.classList.add('flex');
            } else {
                menu.classList.add('hidden');
                menu.classList.remove('flex');
            }
        }

        // 6. Initialize
        window.onload = () => {
            // Initial Render
            renderPosts(blogPosts);
            
            // Check for URL params
            const urlParams = new URLSearchParams(window.location.search);
            const id = parseInt(urlParams.get('id'));
            if (id) {
                openModal(id);
            }

            // Stagger animation on load
            gsap.from(".filter-btn", {y: -20, opacity: 0, duration: 0.5, stagger: 0.05, delay: 0.2});
        };

    </script>
</body>
</html>
